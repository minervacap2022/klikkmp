# KLIK 平台前端功能规范（简体中文）

## 概述
本文档按平台类型（Web / iOS / Android）与功能模块分类，系统性列出前端需要实现的功能。内容严格对应架构中的「Pipeline #9 前端展示」。

---

## 界面结构与交互规范（导航 / 状态 / 操作区）

### 顶部状态栏（全局常驻）
- 位置：屏幕顶部，贯穿全局页面；永不被其他抽屉或弹层覆盖。
- 内容：电量与充电、BLE 连接、录音状态、传输进度；右侧固定一个「Mini App」按钮。
- 交互：
  - 点击任一状态图块 → 展开顶部下拉详情（覆盖内容区，不覆盖状态栏本体），再次点击或下划关闭。
  - 点击「Mini App」按钮 → 打开 Mini Apps 面板（侧滑抽屉/弹层），支持搜索/固定常用/最近使用。

### 底部主导航（仅两项 + 条件项）
- 固定项：
  - 「日程」：默认首页，进入日历优先视图与会议流。
  - 「关系」：进入 Work Life 关系可视化。
- 条件项（中间位）：
  - 「反馈」按钮仅在需要用户反馈时出现（位于「日程」与「关系」之间）。
  - 进入后提供左/右滑 Tinder 式反馈与敏感信息确认；完成/跳过后按钮自动消失。

### 日程页（首页）
- 结构：
  - 顶部状态栏（常驻）
  - 内容区为日历视图（支持月/周/日切换与左右滑动预览前后时间段）。
  - 会议以直角卡片显示在日历单元格内；空单元格显示“创建/暂无”。
- 点击：
  - 点击单个会议卡片 → 进入会议详情；支持返回手势（左滑返回/返回按钮）。
  - 长按会议卡片 → 快速标记强调/星标/归档等快捷操作。
- 上划（内容区向上拖动）：
  - 拉起「任务抽屉」覆盖内容区 70% 高度（可配置），展示任务列表与筛选；下拉或点击半透明遮罩关闭。
- 下划（内容区向下拖动）：
  - 进入「设置与检索」页（或底部抽屉形式）：包含全局搜索、筛选条件、语言设置、设备管理快速入口等；上划或返回关闭。
- 横向滑动：
  - 在月/周/日视图中，左右滑动切换前/后时间段；切换具备 120C150ms 过渡。
- 空态与加载：
  - 空态显示引导文案与“从设备同步/从 云端 导入”操作；加载采用骨架屏。

### 会议详情
- 打开：从「日程」点击会议卡片进入；保持顶部状态栏可见。
- 结构：信息卡（标题/时间/参与者）+ 纪要 + 转录 + 行动项；播放器与转录文本同步滚动。
- 操作：播放/下载/分享、强调跳转、参会人卡片点击进入人物详情、导出 PDF。
- 返回：左滑返回或点击返回箭头；状态保持上次滚动位置。

### 关系页
- 内容：Work Life 知识图谱；节点（人/项目/组织）交互：点击查看详情，拖拽/缩放视图，右上提供图谱筛选（实体类型、权重阈值）。
- 追溯：长按节点或边 → 弹出来源会议与上下文，点击可跳回会议详情。
- 性能：默认懒加载与视窗裁剪，>500 节点流畅；顶部状态栏仍常驻。

### 反馈流（条件出现）
- 出现场景：系统需要用户验证说话人、关系抽取、任务提取或结果正确性时，底部导航中间出现「反馈」按钮。
- 点击进入：呈现 Tinder 卡片式界面（左滑不正确/右滑正确/上滑不确定），必要时展示敏感信息确认页（显式告知并点选确认）。
- 完成与退出：提交后自动返回来源页面；若无待反馈项则从导航隐藏「反馈」。

---

## 1. 通用功能（Web / 移动端）

### 1.1 国际化系统
- **语言切换**：中/英文实时切换，无需重启
- **完整覆盖**：所有界面文本、标签、提示、状态
- **即时生效**：切换后立即更新当前界面
- **多语言扩展**：后续可扩展更多语言

### 1.2 设备状态管理
- **硬件状态栏**（全局可见）：
  - 电量与充电状态
  - BLE 连接状态（已连/断开）
  - 录音状态（录音中/暂停/停止）
  - 传输进度（例："上传 5/10 段"）
- **设备详情**：点击展开查看完整信息
- **实时更新**：BLE 硬件上报驱动 UI 实时刷新

### 1.3 认证与用户管理
- 登录/登出、会话保持
- 个人资料与偏好设置
- 设备绑定/解绑
- 凭证安全与口令管理

### 1.4 通知系统
- 蓝牙首次配对流程与提示
- 网络状态（断网/重连）
- 低电量（<20%）与危急电量（<5%）
- 处理完成与任务完成通知

---

## 2. 移动端专属功能（iOS & Android）

### 2.1 移动导航
- 底部 Tab 导航（日程、Work Life）
- 单列触控优化布局
- 悬浮操作按钮（FAB）
- 手势交互（滑动删除/完成等）
- 下拉刷新

### 2.2 会议管理（移动）
- **会议列表**：
  - 紧凑卡片布局，适配小屏
  - 左右滑动快捷操作（删除/归档/分享）
  - 无限滚动
  - 状态筛选（录制中/处理中/已完成/失败）
- **会议详情**：
  - 全屏弹层，上滑进入
  - Tab（概览/转录/参会人/任务）
  - 音频播放（锁屏控制）
  - 系统级分享面板
  - 会议纪要导出 PDF
- **转录查看**：
  - 惯性滚动
  - 点击说话人进入人物卡
  - 长按复制/翻译/分享
  - 强调标记高亮并带触感反馈

### 2.3 Work Life 可视化（移动）
- **知识图谱视图**：
  - 双指缩放、拖拽节点
  - 点击节点弹出详情
  - 底部筛选（实体类型）
- **人物网络**：卡片列表、滑动查看关系、进入详情
- **项目网络**：时间线/状态徽章、横滑切换

### 2.4 任务管理（移动）
- **任务列表**：紧凑卡片 + 滑动操作
- **任务详情**：底部抽屉、分段控制切换状态、内联编辑负责人/截止日期
- **任务执行**：推送通知、后台执行指示、快捷确认按钮

### 2.5 移动端专有
- 离线模式（下载会议、缓存转录与纪要、恢复后同步）
- 推送通知（处理完成、到期提醒、断连提醒）

---

## 3. Web 专属功能

### 3.1 Web 导航
- 左侧常驻侧边栏
- 面包屑导航
- 键盘快捷键
- 多标签浏览支持
- 顶部工具栏（搜索、设置）

### 3.2 会议管理（Web）
- **日历概览（首页）**：
  - 月/周/日视图切换，左右滑动预览前后时间段
  - 网格日历（直角卡片单元格）
  - 点击会议 → 会议详情（AB）
  - 上滑任务抽屉（AC），支持筛选（全部/待处理/进行中/已完成/需确认）
  - 顶部常驻硬件状态栏
- **会议列表（备选视图）**：表格视图、可排序列、侧边高级筛选、批量操作、CSV/JSON 导出、虚拟滚动
- **会议详情**：多列布局、转录与播放器并排、打印友好、演示全屏
- **转录查看**：分栏视图、波形拖拽、键盘控制、Markdown 导出

### 3.3 Work Life 可视化（Web）
- 大图谱 + 缩放控件、悬停提示、右键菜单、图例面板、导出 PNG/SVG
- 洞察看板：多图表、拖拽自定义、实时刷新、CSV/Excel 导出
- 关系矩阵：热力图 + 交叉检索 + 过滤

### 3.4 任务管理（Web）
- 表格 + 行内编辑、拖拽改状态、批量操作、高级筛选侧栏
- 侧栏详情、关联任务、执行时间线
- 浏览器通知、多标签监控、实时状态

### 3.5 Web 专有
- 高级搜索：全局检索、查询构造器、保存条件与历史
- 浏览器集成：扩展、书签、分享链接
- 导出与打印：会议纪要 PDF、任务 Excel、批量导出、打印布局
- 开发工具：API Explorer、数据库查询、日志查看、性能监控

---

## 4. 核心功能（全平台）

### 4.1 会议功能
- **会议概览**：
  - 日历优先首页：月/周/日切换 + 左右滑动预览（前/后）
  - 在日历单元格中显示近期会议（标题/日期/时长）
  - 状态筛选与搜索
  - 排序（日期/时长/参会人数）
  - 强调标记高亮
- **会议详情**：
  - 完整会议纪要
  - 参会人列表
  - 关键决策与行动项
  - 快捷操作（播放/下载/分享）
- **转录详情**：
  - 带时间戳与说话人
  - 关键词搜索/说话人过滤
  - 强调标记高亮
  - 文本与音频同步
  - **翻译按钮**：目标语言翻译
  - **可追溯性**：长按查看来源会议
- **强调上下文**：
  - 提取强调点前后 ±30s 音频
  - 单独转录强调片段
  - 时间线上突出显示

### 4.2 Work Life 知识图谱
- 人物：姓名/角色/组织、性格特质、核心技能、关系图、潜在需求
- 项目：全量项目、进展状态（正常/风险/延迟）、关键风险/阻塞、机会、相关会议
- 组织：组织结构、文化/战略、关键挑战、关键人物
- 可视化：交互式图谱、按实体类型筛选、图谱内搜索、长按追溯来源会议

### 4.3 任务功能
- **任务列表**：
  - 全量 To-Do（来源于 Pipeline #7）
  - 状态筛选（待处理/执行中/已完成/失败）
  - 类别筛选（A/B/C/D/E）
  - 搜索与统计看板、按类别分组
- **任务详情**：文本/负责人/截止日期、执行状态与时间线、所需工具/Mini Apps、依赖关系、执行结果
- **任务执行**：A（外接连接器）、B（应用内操作）、C（需确认）、D（复杂工作流）、E（手动）
- **待确认**：集中展示、预览（如邮件草稿）、通过/编辑/拒绝、支持批量

### 4.4 搜索与可追溯
- **全局搜索（Z1）**：会议/转录/人物/项目/任务，关键词 + 模糊匹配，相关度排序，点击跳转
- **元素追溯（Z2）**：长按任意元素，展示来源会议（标题/日期/时间）、上下文、相关会议，支持跳转
- **智能推荐（Z3）**：基于搜索历史的内容/人物/项目推荐，时间线视图

### 4.5 反馈收集
- **Tinder 卡片（B1）**：
  - 右滑：正确
  - 左滑：不正确
  - 上滑：不确定
- **任务执行反馈**：展示"原文片段 → 提取任务 → 执行结果"，用户校验后入训
- **说话人反馈**："SPEAKER_00 是张三吗？" 确认/更正并更新语音档案与知识图谱
- **关系反馈**：展示"原始转录 → 提取关系/实体"，支持更正并更新图谱

### 4.6 个人与设置
- **Mini Apps 管理**：高频前 5、全部列表、外部链接
- **设备信息**：固件/设备名，录音次数/时长/任务数，存储占用，绑定/断开/重置
- **语言设置**：界面语言、提示词语言、AI 处理语言，实时生效
- **帮助与支持**：用户手册、客服、关于/隐私、退出登录

---

## 7. 平台技术要求
- **移动端**：Kotlin Multiplatform（Compose Multiplatform；导航使用Decompose/Compose Navigation；SQLite、推送、后台任务、权限）
- **Web**：Kotlin Multiplatform（Compose Multiplatform for Web；部署、PWA、响应式、兼容性）

---

## 8. 性能要求
- 加载：首屏 <3s、导航 <500ms、搜索 <1s
- 实时：设备 <100ms、进度 <500ms、通知 <1s、数据同步 <5s
- 数据量：会议 1000+、1 小时转录 <2s 加载、图谱 500+ 节点流畅、任务 500+ 可筛选

---

## 9. 安全要求
- 认证、HTTPS/WSS、加密本地存储、GDPR、限流与抗 DDoS

---

## 10. 测试要求
- 单元/集成/UI/性能/无障碍（WCAG 2.1 AA）

---

## 11. 设计语言

### 11.1 布局与交互
- 直角卡片式布局（直角无圆角），严格网格对齐
- 极简动画，仅保留必要状态过渡（≤150ms）
- 高响应优先，避免重阴影、模糊、视差等性能开销
- 低对比度、低饱和度视觉层级清晰

### 11.2 配色指南（低对比度、低饱和度）
- 背景：#F7F7F7；表面：#FFFFFF
- 主要文本：#222222 不透明度84%；次要文本：#222222 不透明度60%
- 分割线：#E6E6E6；主色：#3B6EA8（去饱和）；强调色：#7A90A0
- 状态（柔和）：成功 #5E8C6A；警告 #B78B47；错误 #B65C5C

### 11.3 字体
- 系统字体；标题 22C26px Medium；副标题 18px Medium；正文 14C16px Regular；注释 12C13px Regular

### 11.4 参考
- 蒙德里安构图；阿尔伯斯《向正方形致敬》；阿格尼斯・马丁网格

---

**最后更新**：2025-10-28  
**版本**：1.0  
**文档负责人**：KLIK 平台开发团队